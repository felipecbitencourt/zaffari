<!-- PÃ¡gina FixaÃ§Ã£o - Hub de Recursos Adicionais -->
<div class="content-header">
    <h1 data-i18n="extras.hub.title">ğŸ§  Menu de FixaÃ§Ã£o</h1>
</div>

<div class="content-body">
    <!-- INICIO DO TEXTO EDITÃVEL -->
    <p class="lead" data-i18n="extras.hub.lead">Explore recursos adicionais para reforÃ§ar seu aprendizado! Complete os
        mÃ³dulos para desbloquear os
        materiais.</p>

    <!-- SEÃ‡ÃƒO: ACOMPANHAMENTO -->
    <h2 class="section-title" style="margin-top: var(--spacing-lg);">
        <span class="section-icon">ğŸ“š</span>
        <span data-i18n="extras.hub.sections.acompanhamento.title">Acompanhamento</span>
    </h2>
    <p class="section-subtitle" data-i18n="extras.hub.sections.acompanhamento.subtitle">Materiais que acompanham seu
        progresso - liberam gradualmente conforme vocÃª avanÃ§a.</p>

    <div class="extras-hub-grid" id="extras-acompanhamento">
        <!-- Card: Resumo do Curso -->
        <div class="extras-hub-card locked acompanhamento" data-type="resumo" data-category="acompanhamento"
            data-page="extras-resumo">
            <div class="extras-badges">
                <span class="badge-icon" data-module="1">ğŸ“„</span>
                <span class="badge-icon" data-module="2">ğŸ“„</span>
                <span class="badge-icon" data-module="3">ğŸ“„</span>
            </div>
            <div class="extras-hub-icon">ğŸ“–</div>
            <h3 data-i18n="extras.hub.cards.resumo.title">Resumo do Curso</h3>
            <p class="extras-description" data-i18n="extras.hub.cards.resumo.desc">Revise os principais conceitos e
                pontos-chave de todos os mÃ³dulos em um sÃ³
                lugar.</p>
            <div class="extras-lock-msg">
                <span class="lock-icon">ğŸ”’</span>
                <span data-i18n="extras.hub.lock_msg">Complete os mÃ³dulos para desbloquear</span>
            </div>
            <div class="extras-hub-arrow">â†’</div>
        </div>

        <!-- Card: MÃ©tricas -->
        <div class="extras-hub-card unlocked acompanhamento always-unlocked" data-type="metrics"
            data-category="acompanhamento" data-page="extras-metricas" onclick="navigateToPage('extras-metricas')"
            style="cursor: pointer;">
            <div class="extras-badges">
                <span class="badge-icon earned">ğŸ“Š</span>
            </div>
            <div class="extras-hub-icon">ğŸ“Š</div>
            <h3 data-i18n="extras.hub.cards.metrics.title">Meu Desempenho</h3>
            <p class="extras-description" data-i18n="extras.hub.cards.metrics.desc">Acompanhe seu progresso, tempo de
                estudo e resultados nas atividades.</p>
            <div class="extras-hub-arrow">â†’</div>
        </div>



        <!-- Card: Flash Cards -->
        <div class="extras-hub-card locked acompanhamento" data-type="flashcard" data-category="acompanhamento"
            data-page="extras-flashcards">
            <div class="extras-badges">
                <span class="badge-icon" data-module="1">ğŸƒ</span>
                <span class="badge-icon" data-module="2">ğŸƒ</span>
                <span class="badge-icon" data-module="3">ğŸƒ</span>
            </div>
            <div class="extras-hub-icon">ğŸƒ</div>
            <h3 data-i18n="extras.hub.cards.flashcard.title">Flash Cards</h3>
            <p class="extras-description" data-i18n="extras.hub.cards.flashcard.desc">Memorize conceitos importantes com
                cartÃµes de estudo interativos.</p>
            <div class="extras-lock-msg">
                <span class="lock-icon">ğŸ”’</span>
                <span data-i18n="extras.hub.lock_msg">Complete os mÃ³dulos para desbloquear</span>
            </div>
            <div class="extras-hub-arrow">â†’</div>
        </div>

        <!-- Card: QuestionÃ¡rios -->
        <div class="extras-hub-card locked acompanhamento" data-type="quiz" data-category="acompanhamento"
            data-page="extras-questionarios">
            <div class="extras-badges">
                <span class="badge-icon" data-module="1">â“</span>
                <span class="badge-icon" data-module="2">â“</span>
                <span class="badge-icon" data-module="3">â“</span>
            </div>
            <div class="extras-hub-icon">ğŸ“</div>
            <h3 data-i18n="extras.hub.cards.quiz.title">QuestionÃ¡rios</h3>
            <p class="extras-description" data-i18n="extras.hub.cards.quiz.desc">Teste seus conhecimentos com todos os
                questionÃ¡rios do curso reunidos em um sÃ³
                lugar.</p>
            <div class="extras-lock-msg">
                <span class="lock-icon">ğŸ”’</span>
                <span data-i18n="extras.hub.lock_msg">Complete os mÃ³dulos para desbloquear</span>
            </div>
            <div class="extras-hub-arrow">â†’</div>
        </div>
    </div>

    <!-- SEÃ‡ÃƒO: ESPECIAIS -->
    <h2 class="section-title" style="margin-top: var(--spacing-2xl);">
        <span class="section-icon">â­</span>
        <span data-i18n="extras.hub.sections.especiais.title">Especiais</span>
    </h2>
    <p class="section-subtitle" data-i18n="extras.hub.sections.especiais.subtitle">Atividades exclusivas desbloqueadas
        ao completar mÃ³dulos especÃ­ficos.</p>

    <div class="extras-hub-grid" id="extras-especiais">
        <!-- Card: Arraste e Solte - MÃ³dulo 1 -->
        <div class="extras-hub-card locked especial" data-type="drag-drop" data-category="especial"
            data-required-module="1" data-page="extras-arraste">
            <div class="extras-badges">
                <span class="badge-icon" data-module="1">ğŸ§©</span>
            </div>
            <div class="extras-hub-icon">ğŸ¯</div>
            <h3 data-i18n="extras.hub.cards.drag_drop.title">Arraste e Solte</h3>
            <p data-i18n="extras.hub.cards.drag_drop.desc">Associe conceitos e categorias arrastando os itens para os
                lugares corretos.</p>
            <div class="extras-lock-msg">
                <span class="lock-icon">ğŸ”’</span>
                <span data-i18n="extras.hub.lock_msg_m1">Complete o MÃ³dulo 1 para desbloquear</span>
            </div>
            <div class="extras-hub-arrow">â†’</div>
        </div>

        <!-- Card: Ache o Erro - MÃ³dulo 2 -->
        <div class="extras-hub-card locked especial" data-type="find-error" data-category="especial"
            data-required-module="2" data-page="extras-ache-erro">
            <div class="extras-badges">
                <span class="badge-icon" data-module="2">ğŸ”</span>
            </div>
            <div class="extras-hub-icon">ğŸ”</div>
            <h3 data-i18n="extras.hub.cards.find_error.title">Ache o Erro</h3>
            <p data-i18n="extras.hub.cards.find_error.desc">Identifique erros em situaÃ§Ãµes de atendimento e aprenda como
                corrigi-los.</p>
            <div class="extras-lock-msg">
                <span class="lock-icon">ğŸ”’</span>
                <span data-i18n="extras.hub.lock_msg_m2">Complete o MÃ³dulo 2 para desbloquear</span>
            </div>
            <div class="extras-hub-arrow">â†’</div>
        </div>

        <!-- Card: Roleplay - MÃ³dulo 3 -->
        <div class="extras-hub-card locked especial" data-type="roleplay" data-category="especial"
            data-required-module="3" data-page="extras-roleplay">
            <div class="extras-badges">
                <span class="badge-icon" data-module="3">ğŸ­</span>
            </div>
            <div class="extras-hub-icon">ğŸ­</div>
            <h3 data-i18n="extras.hub.cards.roleplay.title">Roleplay</h3>
            <p data-i18n="extras.hub.cards.roleplay.desc">Pratique situaÃ§Ãµes reais de atendimento atravÃ©s de simulaÃ§Ãµes
                interativas.</p>
            <div class="extras-lock-msg">
                <span class="lock-icon">ğŸ”’</span>
                <span data-i18n="extras.hub.lock_msg_m3">Complete o MÃ³dulo 3 para desbloquear</span>
            </div>
            <div class="extras-hub-arrow">â†’</div>
        </div>
    </div>

    <!-- SEÃ‡ÃƒO: REFERÃŠNCIAS -->
    <h2 class="section-title" style="margin-top: var(--spacing-2xl);">
        <span class="section-icon">ğŸ”—</span>
        <span data-i18n="extras.hub.sections.referencias.title">ReferÃªncias</span>
    </h2>
    <p class="section-subtitle" data-i18n="extras.hub.sections.referencias.subtitle">Materiais complementares e links
        Ãºteis.</p>

    <div class="extras-hub-grid" id="extras-referencias">
        <!-- Placeholder 1 -->
        <div class="extras-hub-card locked referencias" data-type="ref1" style="opacity: 0.7; cursor: default;">
            <div class="extras-hub-icon">ğŸ“„</div>
            <h3 data-i18n="extras.hub.cards.ref1.title">Material 1</h3>
            <p class="extras-description" data-i18n="extras.hub.cards.ref1.desc">EspaÃ§o reservado.</p>
            <div class="extras-lock-msg">
                <span class="lock-icon">ğŸ”’</span>
                <span>Em breve</span>
            </div>
        </div>
        <!-- Placeholder 2 -->
        <div class="extras-hub-card locked referencias" data-type="ref2" style="opacity: 0.7; cursor: default;">
            <div class="extras-hub-icon">ğŸ“„</div>
            <h3 data-i18n="extras.hub.cards.ref2.title">Material 2</h3>
            <p class="extras-description" data-i18n="extras.hub.cards.ref2.desc">EspaÃ§o reservado.</p>
            <div class="extras-lock-msg">
                <span class="lock-icon">ğŸ”’</span>
                <span>Em breve</span>
            </div>
        </div>
        <!-- Placeholder 3 -->
        <div class="extras-hub-card locked referencias" data-type="ref3" style="opacity: 0.7; cursor: default;">
            <div class="extras-hub-icon">ğŸ“„</div>
            <h3 data-i18n="extras.hub.cards.ref3.title">Material 3</h3>
            <p class="extras-description" data-i18n="extras.hub.cards.ref3.desc">EspaÃ§o reservado.</p>
            <div class="extras-lock-msg">
                <span class="lock-icon">ğŸ”’</span>
                <span>Em breve</span>
            </div>
        </div>
        <!-- Placeholder 4 -->
        <div class="extras-hub-card locked referencias" data-type="ref4" style="opacity: 0.7; cursor: default;">
            <div class="extras-hub-icon">ğŸ“„</div>
            <h3 data-i18n="extras.hub.cards.ref4.title">Material 4</h3>
            <p class="extras-description" data-i18n="extras.hub.cards.ref4.desc">EspaÃ§o reservado.</p>
            <div class="extras-lock-msg">
                <span class="lock-icon">ğŸ”’</span>
                <span>Em breve</span>
            </div>
        </div>
    </div>

    <div class="box-attention" style="margin-top: var(--spacing-xl);">
        <p data-i18n="[html]extras.hub.tip">ğŸ’¡ <strong>Dica:</strong> Complete os mÃ³dulos do curso para desbloquear
            todos os materiais.
            Cada mÃ³dulo concede medalhas que liberam novos recursos!</p>
    </div>
    <!-- FIM DO TEXTO EDITÃVEL -->
</div>

<script>
    // Atualizar estado dos cards baseado nas medalhas conquistadas
    (function () {
        const badges = JSON.parse(localStorage.getItem('badges') || '{}');

        // Contar medalhas por mÃ³dulo (1, 2, 3)
        const modulosCompletos = {
            m1: badges.m1 && badges.m1.length > 0,
            m2: badges.m2 && badges.m2.length > 0,
            m3: badges.m3 && badges.m3.length > 0
        };

        const numModulosCompletos = (modulosCompletos.m1 ? 1 : 0) + (modulosCompletos.m2 ? 1 : 0) + (modulosCompletos.m3 ? 1 : 0);

        // ACOMPANHAMENTO: Desbloqueia gradualmente
        document.querySelectorAll('.extras-hub-card.acompanhamento:not(.always-unlocked)').forEach(card => {
            const targetPage = card.dataset.page;
            // ... restante do cÃ³digo inalterado ...
            const badgeIcons = card.querySelectorAll('.badge-icon');
            const lockMsg = card.querySelector('.extras-lock-msg');
            const hubIcon = card.querySelector('.extras-hub-icon');
            const description = card.querySelector('.extras-description');

            // Atualizar Ã­cones conforme mÃ³dulos completados (acender apenas os concluÃ­dos)
            badgeIcons.forEach(icon => {
                const moduleNum = parseInt(icon.dataset.module);
                if (badges['m' + moduleNum]) {
                    icon.classList.add('earned');
                }
            });

            // LÃ³gica de estados
            if (numModulosCompletos === 0) {
                // Estado: Totalmente bloqueado (layout padrÃ£o)
                // Nenhuma mudanÃ§a necessÃ¡ria - mantÃ©m estado original
            } else if (numModulosCompletos < 3) {
                // Estado: TransiÃ§Ã£o (1/3 ou 2/3)
                // Ocultar Ã­cone grande e descriÃ§Ã£o
                if (hubIcon) hubIcon.style.display = 'none';
                if (description) description.style.display = 'none';

                // Remover classe locked para permitir clique, mas manter visual de transiÃ§Ã£o
                card.classList.remove('locked');
                card.classList.add('unlocked', 'partial');

                // Mostrar mensagem de progresso com cadeado aberto
                // Use i18n.t if available, otherwise fallback (though i18n should be available globally)
                const unlockedMsg = (window.i18n && window.i18n.t) ? window.i18n.t('extras.hub.unlocked_msg') : 'de 3 mÃ³dulos desbloqueados';
                lockMsg.innerHTML = '<span class="unlock-icon">ğŸ”“</span> ' + numModulosCompletos + ' ' + unlockedMsg;
                lockMsg.classList.add('partial');

                card.onclick = function () {
                    navigateToPage(targetPage);
                };
                card.style.cursor = 'pointer';
            } else {
                // Estado: Totalmente desbloqueado (3/3)
                // Mostrar Ã­cone grande e descriÃ§Ã£o novamente
                if (hubIcon) hubIcon.style.display = '';
                if (description) description.style.display = '';

                card.classList.remove('locked');
                card.classList.add('unlocked');
                lockMsg.style.display = 'none';

                card.onclick = function () {
                    navigateToPage(targetPage);
                };
                card.style.cursor = 'pointer';
            }
        });

        // ESPECIAIS: Desbloqueia por mÃ³dulo especÃ­fico
        document.querySelectorAll('.extras-hub-card.especial').forEach(card => {
            const requiredModule = card.dataset.requiredModule;
            const targetPage = card.dataset.page;
            const badgeIcons = card.querySelectorAll('.badge-icon');

            // Atualizar Ã­cone
            badgeIcons.forEach(icon => {
                const moduleNum = parseInt(icon.dataset.module);
                if (badges['m' + moduleNum]) {
                    icon.classList.add('earned');
                }
            });

            // Verificar se mÃ³dulo necessÃ¡rio foi completado
            if (badges['m' + requiredModule]) {
                card.classList.remove('locked');
                card.classList.add('unlocked');
                card.querySelector('.extras-lock-msg').style.display = 'none';

                card.onclick = function () {
                    navigateToPage(targetPage);
                };
                card.style.cursor = 'pointer';
            }
        });
    })();
</script>

<style>
    /* Estilos para cards em estado parcial (transiÃ§Ã£o) */
    .extras-hub-card.partial {
        min-height: auto;
    }

    .extras-hub-card.partial .extras-badges {
        margin-bottom: var(--spacing-md);
    }

    .extras-hub-card.partial h3 {
        margin-bottom: var(--spacing-sm);
    }

    .extras-hub-card.partial .extras-lock-msg {
        display: block;
        background: rgba(76, 175, 80, 0.1);
        border-radius: var(--radius-md);
        padding: var(--spacing-sm) var(--spacing-md);
        color: #2e7d32;
        font-weight: 500;
    }

    .extras-hub-card.partial .extras-lock-msg .unlock-icon {
        margin-right: var(--spacing-xs);
    }

    /* Badges em preto e branco quando nÃ£o conquistadas */
    .badge-icon {
        filter: grayscale(100%);
        opacity: 0.5;
        transition: all var(--transition-fast);
    }

    .badge-icon.earned {
        filter: grayscale(0%);
        opacity: 1;
    }

    /* Dark mode para estado parcial */
    body.high-contrast .extras-hub-card.partial .extras-lock-msg {
        background: rgba(76, 175, 80, 0.2);
        color: #81c784;
    }
</style>